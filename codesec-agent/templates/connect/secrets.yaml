{{- if .Values.credentials.createSecret  }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "secretName" . }}
type: Opaque
data:
  {{- if .Values.integration.username }}
  USERNAME: {{ .Values.integration.username | toString | b64enc | quote }}
  {{- end }}
  {{- if .Values.integration.password }}
  PASSWORD: {{ .Values.integration.password | toString | b64enc | quote }}
  {{- end }}
  AQUA_KEY: {{ .Values.credentials.aqua_key | toString | b64enc | quote }}
  AQUA_SECRET: {{ .Values.credentials.aqua_secret | toString | b64enc | quote }}
  {{- if .Values.ssl.enabled }}
  {{- if .Values.ssl.ca }}
  ssl-ca-certificate: {{ .Values.ssl.ca | toString | b64enc }}
  {{- end }}
  {{- if .Values.ssl.cert }}
  ssl-certificate: {{ .Values.ssl.cert | toString | b64enc }}
  {{- end }}
  {{- if .Values.ssl.key }}
  ssl-key: {{ .Values.ssl.key | toString | b64enc }}
  {{- end }}
  {{- end }}
  {{- if and .Values.github .Values.github.cert }}
  github-certificate: {{ .Values.github.cert | toString | b64enc }}
  {{- end }}
{{- end }}